var all =
[
    { "name": "Birmingham", "state": "AL", "distance": "100", "jobs1" : 0, "jobs2" : 0, "results1": 0, "results2" : 0 },
    { "name": "Mobile", "state": "AL", "distance": "100", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Huntsville", "state": "AL", "distance": "60", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Phoenix", "state": "AZ", "distance": "90", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Tucson", "state": "AZ", "distance": "80", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Little Rock", "state": "AR", "distance": "100", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Los Angeles", "state": "CA", "distance": "80", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "San Diego", "state": "CA", "distance": "60", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "San Jose", "state": "CA", "distance": "30", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "San Francisco", "state": "CA", "distance": "30", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Bakersfield", "state": "CA", "distance": "50", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Fresno", "state": "CA", "distance": "100", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Santa Maria", "state": "CA", "distance": "80", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Sacramento", "state": "CA", "distance": "45", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Redding", "state": "CA", "distance": "100", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Modesto", "state": "CA", "distance": "30", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Oceanside", "state": "CA", "distance": "20", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Santa Rosa", "state": "CA", "distance": "30", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Salinas", "state": "CA", "distance": "30", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Escondido", "state": "CA", "distance": "15", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Thousand Oaks", "state": "CA", "distance": "15", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Visalia", "state": "CA", "distance": "100", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Denver", "state": "CO", "distance": "40", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Colorado Springs", "state": "CO", "distance": "40", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": " Fort Collins", "state": "CO", "distance": "40", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Bridgeport", "state": "CT", "distance": "30", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Hartford", "state": "CT", "distance": "30", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Dover", "state": "DE", "distance": "40", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Jacksonville", "state": "FL", "distance": "90", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Miami", "state": "FL", "distance": "150", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Tampa", "state": "FL", "distance": "50", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Orlando", "state": "FL", "distance": "65", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Tallahassee", "state": "FL", "distance": "100", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Atlanta", "state": "GA", "distance": "65", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Columbus", "state": "GA", "distance": "60", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Macon", "state": "GA", "distance": "50", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Savannah", "state": "GA", "distance": "65", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Boise", "state": "ID", "distance": "150", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Idaho Falls", "state": "ID", "distance": "120", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Chicago", "state": "IL", "distance": "65", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Rockford", "state": "IL", "distance": "30", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Peoria", "state": "IL", "distance": "80", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Indianapolis", "state": "IN", "distance": "80", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Fort Wayne", "state": "IN", "distance": "70", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Des Moines", "state": "IA", "distance": "80", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Cedar Rapids", "state": "IA", "distance": "80", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Topeka", "state": "KS", "distance": "40", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Salina", "state": "KS", "distance": "60", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Wichita", "state": "KS", "distance": "60", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Colby", "state": "KS", "distance": "100", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Lexington", "state": "KY", "distance": "45", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Louisville", "state": "KY", "distance": "45", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Bowling Green", "state": "KY", "distance": "40", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "New Orleans", "state": "LA", "distance": "55", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Baton Rouge", "state": "LA", "distance": "40", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Lafayette", "state": "LA", "distance": "40", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Shreveport", "state": "LA", "distance": "100", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Bangor", "state": "ME", "distance": "120", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Baltimore", "state": "MD", "distance": "20", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Hagerstown", "state": "MD", "distance": "45", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Boston", "state": "MA", "distance": "30", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Worcester", "state": "MA", "distance": "30", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Springfield", "state": "MA", "distance": "30", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Detroit", "state": "MI", "distance": "45", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Grand Rapids", "state": "MI", "distance": "100", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Minneapolis", "state": "MN", "distance": "130", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Jackson", "state": "MS", "distance": "120", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "St. Louis", "state": "MO", "distance": "120", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Springfield", "state": "MO", "distance": "120", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Kansas City", "state": "MO", "distance": "45", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Helena", "state": "MT", "distance": "120", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Billings", "state": "MT", "distance": "120", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0},
    { "name": "Miles City", "state": "MT", "distance": "120", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Lincoln", "state": "NE", "distance": "100", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "North Platte", "state": "NE", "distance": "100", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Las Vegas", "state": "NV", "distance": "150", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Reno", "state": "NV", "distance": "80", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Elko", "state": "NV", "distance": "120", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Concord", "state": "NH", "distance": "45", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Atlantic City", "state": "NJ", "distance": "45", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Albuquerque", "state": "NM", "distance": "150", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "New York City", "state": "NY", "distance": "60", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Buffalo", "state": "NY", "distance": "50", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Rochester", "state": "NY", "distance": "50", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Syracuse", "state": "NY", "distance": "65", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Albany", "state": "NY", "distance": "70", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Charlotte", "state": "NC", "distance": "65", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Greensboro", "state": "NC", "distance": "50", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Raleigh", "state": "NC", "distance": "40", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Fayetteville", "state": "NC", "distance": "40", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Wilmington", "state": "NC", "distance": "65", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Bismarck", "state": "ND", "distance": "150", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Columbus", "state": "OH", "distance": "75", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Cincinnati", "state": " OH", "distance": "65", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Cleveland", "state": " OH", "distance": "70", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Toledo", "state": " OH", "distance": "35", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Oklahoma City", "state": " OK", "distance": "70", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Tulsa", "state": " OK", "distance": "70", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Portland", "state": "OR", "distance": "50", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Eugene", "state": "OR", "distance": "50", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Philadelphia", "state": "PA", "distance": "45", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Pittsburgh", "state": "PA", "distance": "60", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Harrisburg", "state": "PA", "distance": "55", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Scranton", "state": "PA", "distance": "70", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Providence", "state": "RI", "distance": "30", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Columbia", "state": "SC", "distance": "70", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Charleston", "state": "SC", "distance": "70", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Sioux Falls", "state": "SD", "distance": "120", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Rapid City", "state": "SD", "distance": "120", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Nashville", "state": "TN", "distance": "55", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Knoxville", "state": "TN", "distance": "75", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Chattanooga", "state": "TN", "distance": "75", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Memphis", "state": "TN", "distance": "90", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Dallas", "state": "TX", "distance": "120", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Houston", "state": "TX", "distance": "120", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "San Antonio", "state": "TX", "distance": "120", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Lubbock", "state": "TX", "distance": "120", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "El Paso", "state": "TX", "distance": "120", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Salt Lake City", "state": "UT", "distance": "120", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "MontPelier", "state": "VT", "distance": "70", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Richmond", "state": "VA", "distance": "65", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Norfolk", "state": "VA", "distance": "65", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Roanoke", "state": "VA", "distance": "70", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Seattle", "state": "WA", "distance": "120", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Richland", "state": "WA", "distance": "100", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Spokane", "state": "WA", "distance": "100", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Charleston", "state": "WV", "distance": "100", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Milwaukee", "state": "WI", "distance": "50", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 },
    { "name": "Casper", "state": "WY", "distance": "130", "jobs1": 0, "jobs2": 0, "results1": 0, "results2": 0 }
];

var id1 = 8011629222923375;
var id2 = "152275";
var id3 = "iUuTZLDTsWu";

var search1;
var search2;
var ip = "12.13.144.113";
var allow = true;
var sortj = false;
var displayj = false;
var reqs = [];
var reqs2 = [];

var div = document.getElementById("div1");
document.getElementById('submitButton').addEventListener('click', function (event) { search();});

var req3 = new XMLHttpRequest();
req3.open("GET", "https://api.ipify.org", true);
req3.addEventListener('load', function () {
    if (req3.status >= 200 && req3.status < 400) {
        ip = req3.response;
    } else {
        console.log("Error in network request: " + req.statusText);
    }
});
req3.send(null);

function search() {
    if (allow) {
        var myNode = document.getElementById("chart");
        while (myNode.firstChild) {
            myNode.removeChild(myNode.firstChild);
        }
        allow = false;
        sortj = false;
        displayj = false;
        for (var k = 0; k < 129; k++) {
            reqs.push(new XMLHttpRequest());
            reqs2.push(new XMLHttpRequest());
        }
        jobs1 = [];
        jobs2 = [];
        search1 = document.getElementById('job1').value;
        search2 = document.getElementById('job2').value;
        document.getElementById('j1').textContent = search1;
        document.getElementById('j2').textContent = search2;
        document.getElementById('first').textContent = search1;
        document.getElementById('second').textContent = search2;

        var req5 = new XMLHttpRequest();
        req5.open("GET", "http://api.glassdoor.com/api/api.htm?t.p=" + id2 + "&t.k=" + id3 + "&userip=" + ip + "&useragent=Mozilla4.0&format=json&v=1&action=jobs-prog&countryId=1&jobTitle=" + search1, false);
        req5.addEventListener('load', function () {
            if (req5.status >= 200 && req5.status < 400) {
                var response5 = JSON.parse(req5.responseText);
                document.getElementById('j1min').textContent = Math.round(response5.response.payLow);
                document.getElementById('j1max').textContent = Math.round(response5.response.payMedian);
                document.getElementById('j1mintx').textContent = Math.round(response5.response.payLow * 0.8);
                document.getElementById('j1maxtx').textContent = Math.round(response5.response.payMedian * 0.8);

            } else {
                console.log("Error in network request: " + req5.statusText);
            }
        });
        req5.send(null);

        var req6 = new XMLHttpRequest();
        req6.open("GET", "http://api.glassdoor.com/api/api.htm?t.p=" + id2 + "&t.k=" + id3 + "&userip=" + ip + "&useragent=Mozilla4.0&format=json&v=1&action=jobs-prog&countryId=1&jobTitle=" + search2, false);
        req6.addEventListener('load', function () {
            if (req6.status >= 200 && req6.status < 400) {
                var response6 = JSON.parse(req6.responseText);
                document.getElementById('j2min').textContent = Math.round(response6.response.payLow);
                document.getElementById('j2max').textContent = Math.round(response6.response.payMedian);
                document.getElementById('j2mintx').textContent = Math.round(response6.response.payLow * 0.8);
                document.getElementById('j2maxtx').textContent = Math.round(response6.response.payMedian * 0.8);

                document.getElementById('totalmin').textContent = (document.getElementById('j1min').textContent / 1) + (document.getElementById('j2min').textContent / 1);
                document.getElementById('totalmax').textContent = (document.getElementById('j1max').textContent / 1) + (document.getElementById('j2max').textContent / 1);
                document.getElementById('totalmintx').textContent = (document.getElementById('j1mintx').textContent / 1) + (document.getElementById('j2mintx').textContent / 1);
                document.getElementById('totalmaxtx').textContent = (document.getElementById('j1maxtx').textContent / 1) + (document.getElementById('j2maxtx').textContent / 1);

                document.getElementById('j1estimated').textContent = Math.round(((document.getElementById('j1mintx').textContent / 1) + (document.getElementById('j1maxtx').textContent / 1))/2);
                document.getElementById('j2estimated').textContent = Math.round(((document.getElementById('j2mintx').textContent / 1) + (document.getElementById('j2maxtx').textContent / 1)/2));
                document.getElementById('totalestimated').textContent = (document.getElementById('j1estimated').textContent / 1) + (document.getElementById('j2estimated').textContent / 1);
            } else {
                console.log("Error in network request: " + req6.statusText);
            }
        });
        req6.send(null);

        for (var i = 0; i < all.length; i++) {
            function loop(i) {
                reqs[i].open("GET", "http://api.indeed.com/ads/apisearch?publisher=" + id1 + "&q=" + search1 + "&format=json&fromage=30&l=" + all[i].name + "%2C+" + all[i].state + "&radius=" + all[i].distance + "&limit=25&userip=" + ip + "&useragent=Mozilla/%2F4.0%28Firefox%29&v=2", true);
                reqs[i].addEventListener('load', function () {
                    if (reqs[i].status >= 200 && reqs[i].status < 400) {
                        all[i].response1 = JSON.parse(reqs[i].responseText);
                        all[i].jobs1 = all[i].response1.totalResults;
                    } else {
                        console.log("Error in network request: " + req.statusText);
                    }
                });
                reqs[i].send(null);

                reqs2[i].open("GET", "http://api.indeed.com/ads/apisearch?publisher=" + id1 + "&q=" + search2 + "&format=json&fromage=30&l=" + all[i].name + "%2C+" + all[i].state + "&radius=" + all[i].distance + "&limit=25&userip=" + ip + "&useragent=Mozilla/%2F4.0%28Firefox%29&v=2", true);
                reqs2[i].addEventListener('load', function () {
                    if (reqs2[i].status >= 200 && reqs2[i].status < 400) {
                        all[i].response2 = JSON.parse(reqs2[i].responseText);
                        all[i].jobs2 = all[i].response2.totalResults;

                        if (i == 128) {
                            sortj = true;
                            allow = true;
                        }
                    } else {
                        console.log("Error in network request: " + req2.statusText);
                    }
                });
                reqs2[i].send(null);

            }

            setTimeout(loop(i), (50 * i));
        }
    }
}

var sort = function () {
    if (sortj) {
        for (var i = 0; i < all.length - 1; i++) {
            for (var j = 0; j < all.length - i - 1; j++) {
                if ((all[j].jobs1 + all[j].jobs2) < (all[j + 1].jobs1 + all[j + 1].jobs2)) {
                    var temp = all[j];
                    all[j] = all[j + 1];
                    all[j + 1] = temp;
                }
            }
            if (i == 127) { sortj = false; displayj = true; }
        }
    }
};
setInterval(function () { sort(); }, 250);

var display = function () {
    if (displayj) {
        var row = 0;
        for (var i = 0; i < all.length; i++) {
            if (all[i].jobs1 != 0 && all[i].jobs2 != 0) {
                var table = document.getElementById('chart');
                var newRow = table.insertRow(row);
                var cell1 = newRow.insertCell(0);
                cell1.textContent = i+1;
                var cell1 = newRow.insertCell(1);
                cell1.textContent = all[i].name;
                var cell1 = newRow.insertCell(2);
                cell1.textContent = all[i].state;
                var cell1 = newRow.insertCell(3);
                cell1.textContent = all[i].jobs1;
                var cell1 = newRow.insertCell(4);
                cell1.textContent = all[i].jobs2;
                var cell1 = newRow.insertCell(5);
                cell1.textContent = all[i].distance;
                row++;
            }
            if (i == 128) { displayj = false; }
        }
    }
};
setInterval(function () { display(); }, 250);